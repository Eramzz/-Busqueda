<html>
<head>
<title>README.md</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #bcbec4;}
.s2 { color: #56a8f5;}
.s3 { color: #cf8e6d;}
.s4 { color: #c77dbb; font-style: italic;}
.s5 { color: #6aab73;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
README.md</font>
</center></td></tr></table>
<pre><span class="s0">![</span><span class="s1">Unit Tests</span><span class="s0">](</span><span class="s2">https://github.com/miquelvir/edaii-2025/actions/workflows/unit-tests.yml/badge.svg</span><span class="s0">)</span>

<span class="s3">&gt; </span><span class="s0">[!</span><span class="s1">NOTE</span><span class="s0">]  </span>
<span class="s3">&gt; </span><span class="s1">Remember to change the link above to match your GitHub username and repository name. Then, remove this comment.</span>

<span class="s3"># </span><span class="s1">Authors</span>

<span class="s1">Group number</span><span class="s0">: (</span><span class="s1">todo, add the group number here</span><span class="s0">)</span>

<span class="s3">- </span><span class="s0">(</span><span class="s1">todo, add the email of the first group member</span><span class="s0">)</span>
<span class="s3">- </span><span class="s0">(</span><span class="s1">todo, add the email of the second group member</span><span class="s0">)</span>
<span class="s3">- </span><span class="s0">(</span><span class="s1">todo, add the email of the third group member</span><span class="s0">)</span>

<span class="s3"># </span><span class="s1">Plagiarism Disclaimer</span>
<span class="s3">- </span><span class="s1">You </span><span class="s0">**</span><span class="s1">MUST NOT</span><span class="s0">** </span><span class="s1">look at anyone else's solutions, including previous year students and external tutors.</span>
<span class="s3">- </span><span class="s1">You </span><span class="s0">**</span><span class="s1">MUST</span><span class="s0">** </span><span class="s1">make your repository private.</span>
<span class="s3">- </span><span class="s1">You </span><span class="s0">**</span><span class="s1">MAY</span><span class="s0">** </span><span class="s1">discuss the assignments with other students, but you may not look at or copy each others' code.</span>
<span class="s3">- </span><span class="s1">You </span><span class="s0">**</span><span class="s1">MUST</span><span class="s0">** </span><span class="s1">commit frequently to the repository </span><span class="s0">(</span><span class="s1">at least 1 commit per exercise</span><span class="s0">)</span><span class="s1">.</span>
<span class="s3">- </span><span class="s1">You </span><span class="s0">**</span><span class="s1">MUST NOT</span><span class="s0">** </span><span class="s1">share your code with other students even if they ask you to.</span>
<span class="s3">- </span><span class="s1">You </span><span class="s0">**</span><span class="s1">MUST</span><span class="s0">** </span><span class="s1">add a link next to any code you copy from external sources.</span>
<span class="s3">- </span><span class="s1">You </span><span class="s0">**</span><span class="s1">MUST NOT</span><span class="s0">** </span><span class="s1">ask other students for their project or fragments of their code.</span>

<span class="s3"># </span><span class="s1">Repository Contents</span>

<span class="s3">- </span><span class="s0">[</span><span class="s1">.github/workflows/unit-tests.yml</span><span class="s0">](</span><span class="s1">./.github/workflows/unit-tests.yml</span><span class="s0">): </span><span class="s1">script to run tests when pushing to GitHub </span><span class="s0">(</span><span class="s1">CI</span><span class="s0">)</span>
<span class="s3">- </span><span class="s0">[</span><span class="s1">datasets</span><span class="s0">](</span><span class="s1">./datasets/</span><span class="s0">): </span><span class="s1">datasets of documents you can use to test your search engine</span>
    <span class="s3">- </span><span class="s0">[</span><span class="s1">wikipedia12</span><span class="s0">](</span><span class="s1">./datasets/wikipedia12/</span><span class="s0">): </span><span class="s1">a dataset of 13 documents about animals</span>
    <span class="s3">- </span><span class="s0">[</span><span class="s1">wikipedia270</span><span class="s0">](</span><span class="s1">./datasets/wikipedia270/</span><span class="s0">): </span><span class="s1">a dataset of 271 documents about different topics</span>
    <span class="s3">- </span><span class="s0">[</span><span class="s1">wikipedia540</span><span class="s0">](</span><span class="s1">./datasets/wikipedia540/</span><span class="s0">): </span><span class="s1">a dataset of 541 documents about different topics</span>
    <span class="s3">- </span><span class="s0">[</span><span class="s1">wikipedia5400</span><span class="s0">](</span><span class="s1">./datasets/wikipedia5400/</span><span class="s0">): </span><span class="s1">a dataset of 5401 documents about different topics</span>
<span class="s3">- </span><span class="s0">[</span><span class="s1">src</span><span class="s0">](</span><span class="s1">./src/</span><span class="s0">): </span><span class="s1">folder with all `.c` and `.h` files to run your program</span>
    <span class="s3">- </span><span class="s0">[</span><span class="s1">main.c</span><span class="s0">](</span><span class="s1">./src/main.c</span><span class="s0">): </span><span class="s1">entrypoint to your program</span>
    <span class="s3">- </span><span class="s0">[</span><span class="s1">sample_lib.c</span><span class="s0">](</span><span class="s1">./src/sample_lib.c</span><span class="s0">): </span><span class="s1">an example of how to write `.c` files</span>
    <span class="s3">- </span><span class="s0">[</span><span class="s1">sample_lib.h</span><span class="s0">](</span><span class="s1">./src/sample_lib.h</span><span class="s0">): </span><span class="s1">an example of how to write `.h` files</span>
<span class="s3">- </span><span class="s0">[</span><span class="s1">test</span><span class="s0">](</span><span class="s1">./test/</span><span class="s0">): </span><span class="s1">folder with all `.c` and `.h` files to unit test your program</span>
    <span class="s3">- </span><span class="s0">[</span><span class="s1">test.c</span><span class="s0">](</span><span class="s1">./test/test.c</span><span class="s0">): </span><span class="s1">test runner entrypoint</span>
    <span class="s3">- </span><span class="s0">[</span><span class="s1">sample_lib_test.c</span><span class="s0">](</span><span class="s1">./test/sample_lib_test.c</span><span class="s0">): </span><span class="s1">an example of how to write unit tests</span>
<span class="s3">- </span><span class="s0">[</span><span class="s1">Makefile</span><span class="s0">](</span><span class="s1">./Makefile</span><span class="s0">): </span><span class="s1">file defining what `make` commands are used to run the code from the CLI</span>

<span class="s3"># </span><span class="s1">Developer Setup</span>

<span class="s3">## </span><span class="s1">Linux</span>

<span class="s3">1. </span><span class="s1">Install GCC</span>
<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">sudo apt update</span>
<span class="s5">sudo apt install build-essential</span>
<span class="s5">sudo apt install gdb</span>
<span class="s5">sudo apt install valgrind</span>
<span class="s5">sudo apt install clang-format</span>
<span class="s5">gcc --version</span>
<span class="s3">```</span>

<span class="s3">2. </span><span class="s1">Create your group repository from the template </span><span class="s0">(</span><span class="s1">instructions in the groups spreadsheet</span><span class="s0">)</span>

<span class="s3">3. </span><span class="s0">[</span><span class="s1">Clone the repository using VSCode</span><span class="s0">](</span><span class="s2">https://code.visualstudio.com/docs/sourcecontrol/intro-to-git#_clone-a-repository-locally</span><span class="s0">)</span>
   
<span class="s3">5. </span><span class="s1">Run `make r` and make sure you see this message</span><span class="s0">: </span><span class="s1">`Welcome to EDA 2</span><span class="s0">!</span><span class="s1">`</span>

<span class="s3">## </span><span class="s1">MacOS</span>

<span class="s3">1. </span><span class="s0">[</span><span class="s1">Install homebrew</span><span class="s0">](</span><span class="s2">https://brew.sh/</span><span class="s0">)</span>

<span class="s3">1. </span><span class="s0">[</span><span class="s1">Install GCC</span><span class="s0">](</span><span class="s2">https://formulae.brew.sh/formula/gcc#default</span><span class="s0">)</span>

<span class="s3">2. </span><span class="s0">[</span><span class="s1">Install GDB</span><span class="s0">](</span><span class="s2">https://formulae.brew.sh/formula/gdb#default</span><span class="s0">)</span>

<span class="s3">3. </span><span class="s0">[</span><span class="s1">Install make</span><span class="s0">](</span><span class="s2">https://formulae.brew.sh/formula/make#default</span><span class="s0">)</span>

<span class="s3">4. </span><span class="s0">[</span><span class="s1">Install clang-format</span><span class="s0">](</span><span class="s2">https://formulae.brew.sh/formula/clang-format#default</span><span class="s0">)</span>

<span class="s3">5. </span><span class="s1">Create your group repository from the template </span><span class="s0">(</span><span class="s1">instructions in the groups spreadsheet</span><span class="s0">)</span>

<span class="s3">6. </span><span class="s0">[</span><span class="s1">Clone the repository using VSCode</span><span class="s0">](</span><span class="s2">https://code.visualstudio.com/docs/sourcecontrol/intro-to-git#_clone-a-repository-locally</span><span class="s0">)</span>
   
<span class="s3">8. </span><span class="s1">Run `make r` and make sure you see this message</span><span class="s0">: </span><span class="s1">`Welcome to EDA 2</span><span class="s0">!</span><span class="s1">`</span>

<span class="s3">## </span><span class="s1">Windows</span>

<span class="s3">1. </span><span class="s0">[</span><span class="s1">Install WSL with Ubuntu</span><span class="s0">](</span><span class="s2">https://documentation.ubuntu.com/wsl/en/latest/guides/install-ubuntu-wsl2/</span><span class="s0">) (</span><span class="s1">Linux subsystem inside Windows</span><span class="s0">)</span>

<span class="s3">2. </span><span class="s1">Follow the instructions for </span><span class="s0">[</span><span class="s1">Linux</span><span class="s0">](</span><span class="s1">#linux</span><span class="s0">) </span><span class="s1">in a WSL terminal</span>

<span class="s3">&gt; </span><span class="s0">[!</span><span class="s1">NOTE</span><span class="s0">]  </span>
<span class="s3">&gt; </span><span class="s1">You could compile and run C code directly on Windows. However, the repository template only works on WSL. Thus, you might need to adapt it for it to work. We recommend using WSL instead to avoid problems.</span>

<span class="s3"># </span><span class="s1">How to run</span>

<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">make r</span>
<span class="s3">```</span>

<span class="s3"># </span><span class="s1">How to run unit tests</span>

<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">make t</span>
<span class="s3">```</span>

<span class="s3"># </span><span class="s1">How to format the code</span>

<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">make f</span>
<span class="s3">```</span>

<span class="s3"># </span><span class="s1">How to use Valgrind to check for memory leaks</span>

<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">make v</span>
<span class="s3">```</span>

<span class="s3"># </span><span class="s1">How to run unit tests in GitHub</span>

<span class="s1">When you push to GitHub, your </span><span class="s0">[</span><span class="s1">unit tests will automatically run</span><span class="s0">](</span><span class="s1">.github/workflows/unit-tests.yml</span><span class="s0">)</span><span class="s1">. Check out the results and logs in the Actions tab of your repository </span><span class="s0">(</span><span class="s1">in GitHub</span><span class="s0">)</span><span class="s1">.</span>

<span class="s3"># </span><span class="s1">How to debug</span>

<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">make d</span>
<span class="s3">```</span>

<span class="s1">You can also use `make dt` to debug the unit tests.</span>

<span class="s1">Then, you can</span><span class="s0">:</span>
<span class="s3">- </span><span class="s1">Start the program</span>
<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">run</span>
<span class="s3">```</span>

<span class="s3">- </span><span class="s1">View the stack trace</span>
<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">backtrace</span>
<span class="s3">```</span>

<span class="s3">- </span><span class="s1">Move through the stack trace</span>
<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">up</span>
<span class="s5">down</span>
<span class="s3">```</span>

<span class="s3">- </span><span class="s1">Print a variable</span>
<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">print x</span>
<span class="s3">```</span>

<span class="s3">- </span><span class="s1">Set a breakpoint at the beginning of a function</span>
<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">break my_function_name</span>
<span class="s3">```</span>

<span class="s3">- </span><span class="s1">Set a breakpoint at a specific line</span>
<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">break my_file.c:24</span>
<span class="s3">```</span>

<span class="s3">- </span><span class="s1">Continue after hitting a breakpoint</span>
<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">continue</span>
<span class="s3">```</span>

<span class="s3">- </span><span class="s1">Execute only the next command after hitting a breakpoint</span>
<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">step</span>
<span class="s3">```</span>

<span class="s3">- </span><span class="s1">Execute only the next line after hitting a breakpoint</span>
<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">next</span>
<span class="s3">```</span>

<span class="s0">[</span><span class="s1">Learn more</span><span class="s0">](</span><span class="s2">https://web.mit.edu/gnu/doc/html/gdb_7.html</span><span class="s0">)</span>

<span class="s3"># </span><span class="s1">How to remove temporary files</span>
<span class="s3">```</span><span class="s4">zsh</span>
<span class="s5">make c</span>
<span class="s3">```</span>

<span class="s3"># </span><span class="s1">How to parse a document?</span>

<span class="s3">```</span><span class="s4">c</span>
<span class="s5">Document *document_desserialize(char *path) {</span>
    <span class="s5">FILE *f = fopen(path, &quot;r&quot;);</span>
    <span class="s5">assert(f != NULL);</span>
    
    <span class="s5">Document *document = (Document *)malloc(sizeof(Document));</span>
    
    <span class="s5">char buffer[262144];</span>
    <span class="s5">int bufferSize = 262144;</span>
    <span class="s5">int bufferIdx = 0;</span>
    <span class="s5">char ch;</span>

    <span class="s5">// parse id</span>
    <span class="s5">while ((ch = fgetc(f)) != '\n') {</span>
        <span class="s5">assert(bufferIdx &lt; bufferSize);</span>
        <span class="s5">buffer[bufferIdx++] = ch;</span>
    <span class="s5">}</span>
    <span class="s5">assert(bufferIdx &lt; bufferSize);</span>
    <span class="s5">buffer[bufferIdx++] = '\0';</span>
    <span class="s5">document-&gt;id = atoi(buffer);</span>

    <span class="s5">// parse title</span>
    <span class="s5">// TODO</span>

    <span class="s5">// parse body</span>
    <span class="s5">char linkBuffer[64];</span>
    <span class="s5">int linkBufferSize = 64;</span>
    <span class="s5">int linkBufferIdx = 0;</span>
    <span class="s5">bool parsingLink = false;</span>
    <span class="s5">Links *links = LinksInit();</span>
    
    <span class="s5">bufferIdx = 0;</span>
    <span class="s5">while ((ch = fgetc(f)) != EOF) {</span>
        <span class="s5">assert(bufferIdx &lt; bufferSize);</span>
        <span class="s5">buffer[bufferIdx++] = ch;</span>
        <span class="s5">if (parsingLink) {</span>
            <span class="s5">if (ch == ')') { // end of link</span>
                <span class="s5">parsingLink = false;</span>
                <span class="s5">assert(linkBufferIdx &lt; linkBufferSize);</span>
                <span class="s5">linkBuffer[linkBufferIdx++] = '\0';</span>
                <span class="s5">int linkId = atoi(linkBuffer);</span>

                <span class="s5">// TODO add to links</span>

                <span class="s5">linkBufferIdx = 0;</span>
            <span class="s5">} else if (ch != '(') { // skip first parenthesis of the link</span>
                <span class="s5">assert(linkBufferIdx &lt; linkBufferSize);</span>
                <span class="s5">linkBuffer[linkBufferIdx++] = ch;</span>
            <span class="s5">} </span>
        <span class="s5">} else if (ch == ']') { // found beginning of link id, e.g.: [my link text](123)</span>
          <span class="s5">parsingLink = true;</span>
        <span class="s5">}</span>
    <span class="s5">}</span>
    <span class="s5">assert(bufferIdx &lt; bufferSize);</span>
    <span class="s5">buffer[bufferIdx++] = '\0';</span>
    
    <span class="s5">char *body = (char *)malloc(sizeof(char) * bufferIdx);</span>
    <span class="s5">strcpy(body, buffer);</span>

    <span class="s5">// TODO</span>
<span class="s5">}</span>
<span class="s3">```</span>
</pre>
</body>
</html>